;+---------------------------------------------------------------------------
; RAMFOS
; Стандартная точка входа C82A
; Расчет контрольной суммы
;
; На входе
;  hl - начальный адрес
;  de - конечный адрес
;
; На выходе
;  bc - сумма
;
; 2013-11-01 Дизассемблировано vinxru
;----------------------------------------------------------------------------

calcCrc:	lxi	b, 0
calcCrc_0:	 mov	a, m
		 add	c
		 mov	c, a
		 push	psw
		  call	cmp_hl_de
		  jz	pop_psw_ret
		 pop	psw
		 mov	a, b
		 adc	m
		 mov	b, a
		 call	cmp_hl_de
		 rz
		 inx	h
		jmp	calcCrc_0
